---
title: "Nintendo 3DS|DSi TWiLight Menu++模拟器中文使用指南[转]"
date: 2024-01-16
tags: ["模拟", "模拟器"]
categories: ["模拟器"]
excerpt: "前言 安装 DSi用户，已有Unlaunch和／或HiyaCFW 3DS用户，通过Universal-Updater 3DS用户，手动安装 烧录卡用户 自动载入 TWiLight Menu++ 设置金手指 设置游戏封面 自己制作封面 设置宽屏 准备工作 第1步 GodMod9 第2步 创建宽屏Twl&hellip;"
layout: post
---

 <div><ul> <li>前言</li> <li>安装</li> <ul> <li>DSi用户，已有Unlaunch和／或HiyaCFW</li> <li>3DS用户，通过<a href="https://9ioldgame.com/software/3ds-Universal-Updater.html">Universal-Updater</a></li> <li>3DS用户，手动安装</li> <li>烧录卡用户</li> </ul> <li>自动载入 TWiLight Menu++</li> <li>设置金手指</li> <li>设置游戏封面</li> <li>自己制作封面</li> <li>设置宽屏</li> <ul> <li>准备工作</li> <li>第1步 GodMod9</li> <li>第2步 创建宽屏TwlBg并使用</li> </ul> <li>总结</li> </ul> </div><p>本文为转载，译文原文地址：https://xzonn.top/posts/TWiLightMenu-Guide.html<br>模拟器发布地址：https://github.com/DS-Homebrew/TWiLightMenu/releases<br>英文出处：https://github.com/DS-Homebrew/TWiLightMenu/wiki</p><a name="ci_title0" ></a><h2>前言</h2><p>本文翻译自 TWiLight Menu++ Wiki，原文最后更新于2020-03-08 03:49 (CST)。</p><p>本文仅为探讨相关软件的技术实现，并不提供ROM来源。如有能力，请支持正版游戏。</p><p>TWiLight Menu++是一款开源软件，可以在任天堂DSi、3DS及DS烧录卡中运行，其目的在于升级／替代原有的DSi界面。通过该软件可以运行任天堂的DS、GBA、GBC、GB、SFC、FC等掌机和主机游戏，以及世嘉的GameGear/Master System、Mega Drive/Genesis等游戏，同时支持DSTWO和RocketVideo Technology。</p><p>对于一些玩家来说，这款软件的最大用途就是不需要游戏卡带即可游玩DS游戏，而它的一些特性（如金手指、游戏封面、宽屏等）也很有趣。然而金手指和宽屏特性的开启是依赖于ROM的，开发者团队添加了对官方ROM的支持，但对于游玩汉化版的广大中文玩家来说却需要一些其它操作才能享受到这些特性。</p><p>本文将对该软件的Wiki进行部分翻译，并对我个人遇到的问题及解决思路单独列出，供广大玩家参考。如有翻译不当之处，还请不吝赐教。</p><p>软件的发布地址为：https://github.com/DS-Homebrew/TWiLightMenu/releases/latest。</p><p>请尽可能从该地址下载最新版本，以免出现错误。</p><a name="ci_title1" ></a><h2>安装</h2><p>原文链接：How to install TWiLight Menu</p><p><div><span aria-hidden="true"></span>如果使用64 GB及以上大小的SD卡，请将<code>Save FAT table cache</code>选项关闭，否则SD卡可能会损坏，这是由于nds-bootstrap保存FAT表的错误导致的。</div></p><p><div><span aria-hidden="true"></span>在NDS界面按住SELECT按键即可进入设置，LR按键切换选项，找到<code>Save FAT table cache</code>这项关闭即可</div></p><p><div><span aria-hidden="true"></span>如果该选项已关闭且SD卡发生损坏，那么可能是由于libnds或libfat引起的。</div></p><p><div><span aria-hidden="true"></span>提醒3DS/2DS用户：<br>如果之前使用了TWLoader，请使用CIA管理器（如FBI）卸载TWLoader。</div></p><p><div><span aria-hidden="true"></span>提醒烧录卡用户：<br>如果需要锁定TWL时钟频率和／或VRAM加速烧录卡游戏，请先通过主机的SD卡启动TWiLight Menu++，并将<code>SCFG access in Slot-1</code>选项开启。</div></p><a name="ci_title2" ></a><h3>DSi用户，已有Unlaunch和／或HiyaCFW</h3><ol><li>操作同“3DS用户，手动操作”的第1 ~ 5步。</li><li>将<code>DSi&amp;3DS - SD card users</code>目录下的<code>boot.nds</code>文件解压到SD卡的根目录。</li><li>将<code>DSi - CFW users/SDNAND root</code>目录下的所有文件或文件夹解压到SD卡的根目录。</li><li>（此步对于未安装HiyaCFW的Unlaunch用户）进入Unlaunch菜单的“选项”，将No button设置为<code>TWLMENUPP</code>。</li></ol><a name="ci_title3" ></a><h3>3DS用户，通过Universal-Updater</h3><ol><li>安装Universal-Updater（通过安装3dsx或cia文件）。</li><li>下载<code>NTR/TWL</code>脚本。根据屏幕上的提示操作。</li><li>进入脚本列表，选择刚刚下载的脚本，然后选择想要下载的内容。</li></ol><a name="ci_title4" ></a><h3>3DS用户，手动安装</h3><ol><li>如果SD卡根目录下有<code>_nds</code>文件夹，那么将其删除。</li><li>下载最新版本的7z文件。</li><li>将<code>_nds</code>文件夹解压到SD卡的根目录。</li><li>将<code>DSi&amp;3DS - SD card users</code>目录下的<code>_nds</code>文件夹解压到SD卡的根目录。</li><li>将<code>DSi&amp;3DS - SD card users</code>目录下的<code>boot.nds</code>文件解压到SD卡的根目录。</li><li>将<code>3DS - CFW users</code>目录下的所有cia文件解压到SD卡的任意位置。</li><li>在3DS/2DS主机上安装第上一步的两个cia文件。</li></ol><a name="ci_title5" ></a><h3>烧录卡用户</h3><ol><li>下载最新版本的7z文件。</li><li>将<code>_nds</code>文件夹解压到烧录卡SD卡的根目录。</li><li>将<code>Flashcard users</code>目录下的<code>_nds</code>文件夹解压到烧录卡SD卡的根目录。</li></ol><a name="ci_title6" ></a><h2>自动载入 TWiLight Menu++</h2><ol><li>将<code>Flashcard users/Autoboot/(烧录卡种类)</code>目录下的所有文件或文件夹解压到烧录卡SD卡的根目录。（如果没有找到你的烧录卡，可以跳过此步。）</li><li>对于老DS/DSLite用户：进入DS菜单的“设置”，打开“自动启动”（auto-start），这样烧录卡即可自动启动。</li></ol><a name="ci_title7" ></a><h2>设置金手指</h2><p>原文链接：FAQs &gt; Q: How do I use cheats?</p><p>下载<code>usrcheat.dat</code>格式的金手指数据库，然后保存到SD卡的<code>/_nds/TWiLightMenu/extras</code>目录下。最新的数据库可以从DeadSkullzJr的帖子获取。</p><p>本站镜像：https://9ioldgame.lanzouj.com/iuZwQ18p9ayd</p><pre><code>文件名称: usrcheat.rar 文件大小: 1.73 MB (1,817,259 字节) MD5: 061368A2E9ACE46FB7193CFCA29D676A SHA1: 28C29A2C988CB2A36E50EEFAD5ED8E2E1821D967 CRC32: AEF4217F</code></pre><p><div><span aria-hidden="true"></span>译注 1<br><img src="https://lad.sfcrom.cn/wp-content/uploads/2024/01/20240115_65a4bcc1241c3.jpg" title="用r4cce修改金手指代码" alt="Nintendo 3DS|DSi TWiLight Menu++模拟器中文使用指南[转]"></p><p>“DeadSkullzJr’s NDS Cheat Databases”是由国外玩家DeadSkullzJr等人整理的金手指数据库，目前仍在更新，囊括了非常多的DS游戏。然而我在使用这个数据库的时候，发现TWiLight Menu++没有办法读取汉化版游戏的金手指。在查阅资料后我得出了结论：</p><p>金手指数据库中区分每个游戏时需要比对游戏代码和ROM的校验值。对于汉化游戏来说，游戏代码与原版相同，但校验值可能会发生变化。当游戏代码相同而校验值不同时，对于R4等烧录卡及DeSmuME模拟器仍可以使用金手指，但TWiLight Menu++则不可以使用。因此，如果需要在TWiLight Menu++中使用金手指，则需要修改金手指数据库中的校验值。</p><p>首先需要查看ROM的游戏代码。可以使用DeSmuME载入游戏，然后从菜单的“File” → “ROM Info”页面的右上角“Game Code: <code>XXXX</code>”中可以看到游戏代码。其中最后一位表示游戏的版本，日版为J，韩版为K，神游版为C，等等。</p><p>然后使用“r4cce”软件（此软件有汉化版，或者用本站的镜像可自行查找）打开金手指数据库，找到原版游戏所在的位置（可按名字查找，也可按游戏代码查找），复制并粘贴。然后选择粘贴得到的一行，确认右侧的<code>“游戏ID”</code>第一个输入框与上文所述汉化版游戏代码相同。此时点击第二个输入框右侧的<code>“…”</code>，在打开的对话框中找到汉化版游戏ROM并确认，第二个输入框中的代码会修改为汉化版ROM的校验值。此时将数据库保存为<code>“usrcheat.dat”</code>格式即可按照上文所述的方法使用。</p><p>如果不想自己动手操作或是不习惯看英文，也可在国内的网站查找中文金手指数据库。</div></p><a name="ci_title8" ></a><h2>设置游戏封面</h2><ol><li>确保已在TWiLight Menu++中打开显示游戏封面的选项。</li><li>从GameTDB网站下载png版本的封面包。</li><li>将所有png文件解压到SD卡的<code>/_nds/TWiLightMenu/boxart</code>目录下。</li><li>你的DS游戏现在应该可以显示封面了。</li></ol><a name="ci_title9" ></a><h2>自己制作封面</h2><ul><li>将所有自制封面保存到SD卡的<code>/_nds/TWiLightMenu/boxart</code>目录下。封面文件必须为[b]png[/b]格式。</li></ul><p>译者注：如果你使用Windows操作系统，请务必开启<code>文件扩展名</code>的显示。</p><ul><li>文件名可以是游戏的代码（如CPUJ.png）或是游戏ROM的文件名（如精灵宝可梦 白金.nds.png）。</li><li>png文件的分辨率如所示。</li><li>封面可以在GameTDB网站的<code>DS Covers (png)</code>分类下找到。</li></ul><p>游戏封面表格</p><table><thead><tr><th>ROM类型</th><th>分辨率</th></tr></thead><tbody><tr><td>NDS/DSi</td><td>128 × 115</td></tr><tr><td>GBA/GBC/GB/FDS</td><td>115 × 115</td></tr><tr><td>NES/GEN/MD/SFC/MS/GG</td><td>84 × 115</td></tr><tr><td>SNES</td><td>158 × 115</td></tr></tbody></table><a name="ci_title10" ></a><h2>设置宽屏</h2><p>原文链接：Playing in Widescreen<br>需要一台任天堂3DS/2DS（新旧均可），以及一台64位Windows电脑。译者注：此特性需要已安装Luma3DS以及GodMod9的主机，如果不确定，请在开机时按住“START”检查是否进入GodMod9，或在开机时按住“SELECT”检查是否进入Luma3DS的设置页面。</p><a name="ci_title11" ></a><h3>准备工作</h3><ul><li>如果TWiLight Menu++版本不是最新，需要手动更新到最新版本。</li><li>如果旧版本已经是v9.0.0以上可以跳过此步。</li><li>确保Luma固件文件<code>boot.firm</code>位于SD卡根目录。</li></ul><a name="ci_title12" ></a><h3>第1步 GodMod9</h3><ol><li>进入<code>SYSNAND CTRNAND</code>。</li><li>选择<code>title</code>。</li><li>选择<code>00040138</code>。</li><li>选择<code>#0000102</code>。（对于新3DS，<code>#</code>代表<code>2</code>；对于老3DS，<code>#</code>代表<code>0</code>。）</li><li>选择<code>content</code>。</li><li>选择<code>000000##.app</code>。（##代表可以找到的最大数字。）</li><li>选择<code>NCCH image options...</code>。</li><li>选择<code>Mount image to drive</code>。</li><li>如果被询问是否进入路径，选择<code>是</code>。</li><li>选择<code>exefs.bin</code>。</li><li>选择[b]copy to 0:/gm9/out[/b]。</li><li>关机。</li></ol><a name="ci_title13" ></a><h3>第2步 创建宽屏TwlBg并使用</h3><ol><li>从这个帖子下载TWL Patcher。</li><li>将SD卡的<code>/gm9/out/</code>目录下的<code>exefs.bin</code>文件复制到与<code>mkpatch_b.exe</code>同一个目录下。</li><li>将<code>exefs.bin</code>重命名为<code>section0.bin</code>。</li><li>打开记事本。</li><li>在记事本中写入：<code>mkpatch_b asd 1010</code>。</li><li>将上述文本保存在与<code>mkpatch_b.exe</code>同一个文件夹下，文件名为<code>wide.bat</code>。</li><li>运行<code>wide.bat</code>。</li><li>在SD卡的<code>/_nds/TWiLightMenu/</code>目录下创建名为<code>TwlBg</code>的文件夹。</li><li>将第7步生成的<code>TwlBg.cxi</code>文件移动到第8步创建的<code>TwlBg</code>文件夹下。</li><li>将<code>TwlBg.cxi</code>重命名为<code>Widescreen.cxi</code>。</li><li>在Luma3DS的设置中，开启<code>external FIRMs and modules</code>。（在开机时按住选择键进入设置界面）</li><li>在TWiLight Menu++的设置中，转到<code>Games/Apps settings</code>页面，将<code>Screen Aspect Ratio</code>设置为<code>16:10</code>。</li><li>之后即可享受16:10的DS游戏</li></ol><p><div><span aria-hidden="true"></span>译注2</p><p>与金手指类似，宽屏补丁也需要对比游戏代码和ROM的校验值，因此如果需要使用宽屏则也需要做一些工作。</p><p>宽屏补丁的位置在SD卡的<code>/_nds/TWiLightMenu/widescreen/</code>目录下，命名方式为“游戏代码-CRC16.bin”。游戏代码可按照译注1的说明获取，而CRC16可以用16进制编辑器（如HxD）打开ROM，读取0x015E ~ 0x015F处的内容（小端序）。</p><p>如图</p><p><img src="https://lad.sfcrom.cn/wp-content/uploads/2024/01/20240115_65a4bcc14fa13.jpg" title="读取ROM的CRC16值" alt="Nintendo 3DS|DSi TWiLight Menu++模拟器中文使用指南[转]"></p><p>该ROM的0x015E ~ 0x015F的数据为<code>04 2D</code>，游戏代码为<code>CPUJ</code>，则补丁的文件名为<code>CPUJ-2D04.bin</code>。注意CRC16是没有用0补齐的。</p><p>如果某游戏的汉化版没有可用的宽屏补丁而原版有，那么可以尝试将原版的宽屏补丁复制一份并改成汉化版对应的文件名使用。另外，<code>/_nds/TWiLightMenu/apfix/</code>目录下的ips补丁的命名方式同理。</p><p>我个人在使用的时候发现，开启宽屏效果之后仅仅是把上屏原有的4:3比例强制拉伸到了16:10，不知是因为我的方法有问题还是本来就是这个样子。</div></p><a name="ci_title14" ></a><h2>总结</h2><p>总体来看，TWiLight Menu++的使用还是比较方便的，金手指、游戏封面、宽屏都可以设置，对于汉化版ROM可能需要一些操作：</p><ul><li>金手指可以直接搜索汉化版可用的金手指，或者尝试用国外的数据库修改游戏ID使用。</li><li>游戏封面可以直接从数据库下载，也可自己添加。</li><li>宽屏和游戏补丁可以将原版的补丁复制一份并修改文件名。</li><li>此外，Wiki原文还介绍了一些特性，我个人感觉比较小众，因此不再翻译，如有需求可以查看原文。</li></ul> </div> 

---
📖 **下载地址/原文地址：** 本文最初发布于我的博客网站：[https://lad.sfcrom.cn/2024/01/1116/](https://lad.sfcrom.cn/2024/01/1116/)
